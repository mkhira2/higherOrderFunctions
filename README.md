reverse engineering foreach/map/filter/reduce
